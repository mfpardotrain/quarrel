(this["webpackJsonptaptoo-client"]=this["webpackJsonptaptoo-client"]||[]).push([[0],{14:function(e,t,a){},16:function(e,t,a){e.exports=a.p+"static/media/brown-logo.3e9431dc.svg"},19:function(e,t,a){e.exports=a.p+"static/media/order.43350967.svg"},23:function(e,t,a){e.exports=a.p+"static/media/order-history.51ec7044.svg"},27:function(e,t,a){},29:function(e,t,a){e.exports=a.p+"static/media/straight-logo-no-icon.09a1068c.svg"},32:function(e,t,a){e.exports=a.p+"static/media/market.3bb4ac0e.svg"},34:function(e,t,a){e.exports=a(79)},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){e.exports=a.p+"static/media/cows.91ddc8b3.jpg"},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(28),s=a.n(c),l=(a(39),a(1)),o=(a(40),a(12)),i=a(7),u=a(3),m=a(2),d=(a(41),Object(n.createContext)());function p(){return Object(n.useContext)(d)}var b=a(29),f=a.n(b),v=function(e){var t=p().setAuthTokens;localStorage.getItem("is_farmer");return r.a.createElement("header",{className:"header"},r.a.createElement(o.b,{to:"/app/home"},r.a.createElement("img",{src:f.a,className:"header-logo"})),r.a.createElement("nav",{className:e.hideNav?"hide-nav":"navigation"},r.a.createElement(o.b,{to:"/app/home",exact:!0,activeClassName:"active"},"Home"),r.a.createElement(o.b,{to:"/app/about",activeClassName:"active"},"About"),r.a.createElement(o.b,{to:"/app/cart",activeClassName:"active"},"Cart",r.a.createElement("span",{className:e.nVegetables>0?"badge":"no-items"},e.nVegetables)),r.a.createElement(o.b,{to:"/app/settings",activeClassName:"active"},"Settings"),r.a.createElement(o.b,{to:"/login",onClick:function(){t(),localStorage.clear()},activeClassName:"active"},"Log Out")))},g=(a(47),a(48),a(14),a(4)),E=a.n(g),h=a(8),y=(a(50),function(e){var t=Object(n.useReducer)((function(e,t){return Object(m.a)(Object(m.a)({},e),t)}),{listOpen:!1}),a=Object(l.a)(t,2),c=a[0],s=a[1],o=function(){s({listOpen:!c.listOpen})},i=e.className?" "+e.className:"",u=e.className?"dd-list-item"+i+"-list-item":"dd-list-item",d=e.className?"dd-wrapper"+i+"-wrapper":"dd-wrapper",p=e.className?"dd-header-selected"+i+"-header-selected":"dd-header-selected",b=e.className?"dd-header"+i+"-header":"dd-header",f=e.className?"dd-header-title"+i+"-header-title":"dd-header-title",v=e.className?"dd-list"+i+"-list":"dd-list",g=e.dropDownMap?e.dropDownMap:e.dropDownValues,y=e.selected?e.selected:e.dropDownTitle,O=g.map((function(t){return r.a.createElement("li",{className:c.listOpen?u:"inactive",key:e.dropDownMap?t.id:void 0,onClick:Object(h.a)(E.a.mark((function a(){return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.resetRequest();case 2:e.dropDownSelect(t),o();case 4:case"end":return a.stop()}}),a)})))},e.dropDownMap?t.name:t)}));return r.a.createElement("div",{className:d},r.a.createElement("div",{className:c.listOpen?p:b,onClick:function(){o()}},r.a.createElement("div",{className:f},y)),r.a.createElement("ul",{className:c.listOpen?v:"inactive"},O))}),O=function(e){var t=void 0===e.type?"text":e.type,a=(e.required,e.labelClass?e.labelClass:"right-label"),n=e.has_max?e.has_max:void 0;return r.a.createElement("div",{className:e.className},"left-label"===a&&r.a.createElement("label",{className:a},e.label),r.a.createElement("input",{className:"form-input",name:e.name,type:t,value:e.value,onChange:e.handleChange,placeholder:e.placeholder,max:n,min:0,onKeyPress:e.onEnter&&function(e){"Enter"===e.key&&document.getElementById("enter-button").click()}}),"right-label"===a&&r.a.createElement("label",{className:a},e.label))};function j(e,t,a){var r="http://rootsuat-env.eba-g7nmg6yf.us-east-2.elasticbeanstalk.com/"+e,c={"Content-Type":"application/json",Authorization:"Token "+t};return Object(n.useCallback)(function(){var e=Object(h.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(r+t,{method:"GET",headers:c}).then((function(e){return e.json()})).then((function(e){return a(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[])}function N(e,t,a){var r="http://rootsuat-env.eba-g7nmg6yf.us-east-2.elasticbeanstalk.com/"+e,c={"Content-Type":"application/json",Authorization:"Token "+a};return Object(n.useCallback)(function(){var e=Object(h.a)(E.a.mark((function e(a,n){var s,l=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>2&&void 0!==l[2]&&l[2],a(!0),e.next=4,fetch(r,{method:"POST",headers:c,body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){n(e.status),s&&s(e.order_id)}));case 4:a(!1);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[t])}function k(e,t){var a="http://rootsuat-env.eba-g7nmg6yf.us-east-2.elasticbeanstalk.com/"+e,r={"Content-Type":"application/json",Authorization:"Token "+t};return Object(n.useCallback)(function(){var e=Object(h.a)(E.a.mark((function e(t,n,c){var s,l=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>3&&void 0!==l[3]&&l[3],t(!0),e.next=4,fetch(a,{method:"POST",headers:r,body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){n(e.status),s&&s(e.order_id)}));case 4:t(!1);case 5:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),[t])}function w(e){var t="http://rootsuat-env.eba-g7nmg6yf.us-east-2.elasticbeanstalk.com/"+e,a={"Content-Type":"application/json"};return Object(n.useCallback)(function(){var e=Object(h.a)(E.a.mark((function e(n,r,c){var s,l=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>3&&void 0!==l[3]&&l[3],n(!0),e.next=4,fetch(t,{method:"POST",headers:a,body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){r(e.status),s&&s(e.order_id)}));case 4:n(!1);case 5:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),[])}function C(e,t,a,r){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o="http://rootsuat-env.eba-g7nmg6yf.us-east-2.elasticbeanstalk.com/"+e,i={"Content-Type":"application/json",Authorization:"Token "+r},u=new AbortController;Object(n.useEffect)((function(){function e(){return(e=Object(h.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(o,{method:t,headers:i,body:s});case 2:e.sent.json().then((function(e){return a(e)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),u.abort()}),[c,l])}function S(e,t,a,r){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o="http://rootsuat-env.eba-g7nmg6yf.us-east-2.elasticbeanstalk.com/"+e,i={"Content-Type":"application/json",Authorization:"Token "+r},u=new AbortController;Object(n.useEffect)((function(){function e(){return(e=Object(h.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(o,{method:t,headers:i,body:s});case 2:e.sent.json().then((function(e){return a(e)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return c&&function(){e.apply(this,arguments)}(),u.abort()}),[c,l])}a(51);var _=function(e){var t=p().authTokens;var a=Object(n.useReducer)((function(e,t){return Object(m.a)(Object(m.a)({},e),t)}),{selectedFarm:!1,Vegetables:[],farms:[],requested:null,type:"order",markets:!1,farm_plus_market:!1,selectedMarket:!1}),c=Object(l.a)(a,2),s=c[0],o=c[1];C("farm/","GET",(function(e){o({farms:e})}),t);var i=function(e){o({requested:Object(m.a)(Object(m.a)({},s.requested),{},Object(u.a)({},e.target.name,parseFloat(e.target.value)))})},d=j("formDetails/",t,(function(e){o({Vegetables:e})})),b=j("markets/",t,(function(e){o({markets:e})})),f=s.farms.map((function(e){return{name:e.farm_name,id:e.id}})),v=Object.keys(s.markets).map((function(e){return s.markets[e].name})),g=Object.keys(s.Vegetables).map((function(t){var a=s.Vegetables[t],n=!!e.max&&a.available_amount;return r.a.createElement("div",{className:0===a.available_amount?"vegetable-row unavailable":"vegetable-row"},r.a.createElement("div",{className:"row-column"},r.a.createElement("span",{className:"vegetable-name"},a.vegetable_name),r.a.createElement("div",{className:"vegetable-details"},r.a.createElement("span",{className:"vegetable-availability"},a.available_amount+a.unit_weight+" available"),r.a.createElement("span",{className:"vegetable-price"},"$"+a.price+" per "+a.unit_weight),0!==a.available_amount&&r.a.createElement(O,{name:a.vegetable_name,handleChange:i,value:s.veg,label:a.unit_weight,placeholder:"0",type:"number",has_max:n,className:"overview-input"}))))})),E=s.selectedFarm&&r.a.createElement("div",{className:"selected-farm"},s.selectedFarm),h=s.farm_plus_market&&s.markets.find((function(e){return e.id.toString()===s.farm_plus_market.match("(?<=/)(.*)")[0]})).name,N=function(){var e=0;if(s.Vegetables&&s.requested){var t=function(t){var a=s.requested[t],n=s.Vegetables.find((function(e){return e.vegetable_name===t})).price;e+=a*n};for(var a in s.requested)t(a)}return isNaN(e)?0:e}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cows"}),r.a.createElement("div",{className:"order-form"},r.a.createElement("div",{className:"farm"},e.backButton,r.a.createElement("div",{className:"form-top-container"},r.a.createElement("div",{className:"order-dropdown"},r.a.createElement(y,{dropDownSelect:function(e){o({selectedFarm:e,requested:null}),b(e.id)},dropDownTitle:"Choose a Farmer",dropDownMap:f,resetRequest:function(){return o({requested:[],farm_plus_market:!1,selectedFarm:!1,selectedMarket:!1,Vegetables:[]})}})),r.a.createElement("div",{className:"order-dropdown"},s.selectedFarm&&r.a.createElement(y,{dropDownSelect:function(e){var t=s.markets.find((function(t){return t.name===e})).id,a=s.selectedFarm.id+"/"+t;d(a),o({farm_plus_market:a})},dropDownTitle:"Choose a Market",dropDownValues:v,resetRequest:function(){return o({requested:[],farm_plus_market:!1,selectedMarket:!1,Vegetables:[]})}})))),E&&r.a.createElement("span",{className:"farm-name"},s.selectedFarm.name+(s.farm_plus_market?" at "+h:"")),r.a.createElement("div",{className:"vegetables"},s.selectedFarm&&g)),r.a.createElement("div",null,s.farm_plus_market&&r.a.createElement("div",{className:"form-bottom"},r.a.createElement("div",null,"Total Price: $",N),r.a.createElement("br",null),r.a.createElement("button",{type:"submit",className:"default-button order-button",onClick:function(){var t;t=s.requested,Object.keys(t).map((function(e){return isNaN(t[e])&&delete t[e]})),e.updateCart(s,s.Vegetables,s.selectedFarm,h,N)}},r.a.createElement("span",null,"Add to Cart")))))},T=function(e){return r.a.createElement(_,{farm:!1,buttonName:"Place Order",max:!0,updateCart:e.updateCart,backButton:e.backButton})},q=a(15),D=function(e){var t=function(t){return!1===e.selectedTile?t.class:"hidden"},a=Object.keys(e.tileDetails).map((function(a){var n=e.tileDetails[a];return r.a.createElement("div",{className:t(n),key:a,id:n.css_id,onClick:function(){!function(t){e.setSelectedTile(t.name),e.setSelectedComponent(t.component)}(n),e.tileOnClick&&e.tileOnClick(n)}},r.a.createElement("span",{className:e.nameSize},n.name),n.content&&n.content)}));return r.a.createElement(r.a.Fragment,null,a,e.selectedComponent&&r.a.createElement("div",{className:"selected-tile",id:"selected-tile"},e.selectedComponent))},P=function(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)(!1),i=Object(l.a)(o,2),d=i[0],b=i[1],f=Object(n.useState)(!1),v=Object(l.a)(f,2),g=v[0],E=v[1],h=Object(n.useState)(!1),j=Object(l.a)(h,2),w=j[0],_=j[1],T=function(e,t){return r.a.createElement("button",{className:"back-button",id:"back",onClick:function(){s(e),b(t),_(!w),J()}},r.a.createElement("span",null))},P=p().authTokens;var x=Object(n.useReducer)((function(e,t){return Object(m.a)(Object(m.a)({},e),t)}),{type:"",Vegetables:[],VegetableDetails:[],requested:{},update:[],loading:!1,success:null,selectedVegetable:"",farm:null}),V=Object(l.a)(x,2),A=V[0],F=V[1],M=function(e){var t="Add New Produce"===e?e:A.VegetableDetails.find((function(t){return t.id===e.id}));F({selectedVegetable:t}),"Add New Produce"!==e&&E(!0)},R=function(e){F({requested:Object(m.a)(Object(m.a)({},A.requested),{},Object(u.a)({},e.target.name,parseFloat(e.target.value)))})},B=function(e){if("Add New Produce"!==A.selectedVegetable){var t=A.VegetableDetails.find((function(e){return e.id===A.selectedVegetable.id}))[e.target.name];e.target.value.length>0?F({update:Object(m.a)(Object(m.a)({},A.update),{},Object(u.a)({},e.target.name,e.target.value))}):F({update:Object(m.a)(Object(m.a)({},A.update),{},Object(u.a)({},e.target.name,t))});var a=A.requested?A.requested[Object.keys(A.requested)[0]]:0;"vegetable_name"===e.target.name&&(e.target.value.length>0?F({requested:Object(u.a)({},e.target.value,a)}):F({requested:[]}))}else F({update:Object(m.a)(Object(m.a)({},A.update),{},Object(u.a)({},e.target.name,e.target.value))}),"vegetable_name"===e.target.name&&F({requested:Object(u.a)({},e.target.value,0)})},I=function(e){F({update:Object(m.a)(Object(m.a)({},A.update),{},Object(u.a)({},e.type,e.name))})},L=function(e){F({loading:e})},H=function(e){F({success:e})},J=function(){H(null),F({type:""}),F({requested:[]}),F({update:[]}),F({selectedVegetable:""}),E(!1)},K=function(e,t){Object.keys(e).map((function(a){return t(e[a])&&delete e[a]}))};C("user/","GET",(function(e){F({farm:e.farm.id})}),P),S("farmVegetable/"+A.farm,"GET",(function(e){F({VegetableDetails:e})}),P,A.farm,null,w),S("formDetails/"+A.farm+"/0","GET",(function(e){F({Vegetables:e})}),P,A.farm,null,w);var z=N("farmVegetable/"+A.farm,A,P),G=["lbs","kgs","each","dozen"].map((function(e){return{name:e,type:"unit_weight",id:e}})),W=function(){return null},U=["vegetable_name","description","price","unit_weight"].map((function(e){return"unit_weight"!==e?r.a.createElement(O,{name:e,key:e,type:"text",value:A.update.key,handleChange:B,label:e,className:"inventory-overview-input",placeholder:A.selectedVegetable[e]}):r.a.createElement(y,{dropDownSelect:I,dropDownTitle:e,dropDownMap:G,key:e,resetRequest:W,selected:A.update.unit_weight})})),Y=k("formDetailsPost/",P),X=A.success,$=Object.keys(A.Vegetables).map((function(e){var t=A.Vegetables[e].vegetable_name;return{class:"tile small-tile",name:t,id:A.Vegetables[e].id,css_id:t.replace(/\s+/g,"-").toLowerCase()}})),Q=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"tile-container max-width"},r.a.createElement(D,{tileDetails:$,setSelectedComponent:b,selectedTile:e,setSelectedTile:s,tileOnClick:M,nameSize:"tile-name-small"})))},Z={0:{class:"tile medium-tile",name:"Add New Produce",css_id:"add-inventory"},1:{class:"tile medium-tile",name:"Your Produce",css_id:"remove-inventory",component:Q(c)}},ee="Your Produce"===c|"Add New Produce"===c?T(!1,!1):!1!==c?T("Your Produce",Q(!1)):e.backButton;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cows"}),r.a.createElement("div",{className:"order-form"},r.a.createElement("div",{className:"form-top"},c?ee:e.backButton,r.a.createElement("span",{className:"farm-name"},"Add New Produce"===c|"Your Produce"===c?c:A.selectedVegetable?A.Vegetables.find((function(e){return e.id===A.selectedVegetable.id})).vegetable_name:"Inventory")),r.a.createElement("div",{className:"tile-container max-width"},r.a.createElement(D,{tileDetails:Z,selectedComponent:d,setSelectedComponent:b,selectedTile:c,setSelectedTile:s,tileOnClick:function(e){F({type:e.name}),"Add New Produce"===e.name&&M("Add New Produce"),_(!w)},nameSize:"tile-name-medium"})),g&&r.a.createElement("div",{className:"inventory-vegetables"},function(){var e=A.Vegetables.find((function(e){return e.id===A.selectedVegetable.id})),t=Object.keys(A.requested)[0]&&A.requested[Object.keys(A.requested)[0]]>0?A.requested[e.vegetable_name]:"0 ";return r.a.createElement("div",{className:"update-row"},r.a.createElement("div",{className:"inventory-details"},r.a.createElement("div",{className:"inventory-overview"},U),r.a.createElement("button",{type:"submit",className:"default-button order-button",onClick:function(){z(L,H),_(!w)},disabled:A.loading},A.loading&&r.a.createElement(q.RingLoader,{loading:A.loading}),!A.loading&&r.a.createElement("span",null,"Update Inventory"))),r.a.createElement("div",{className:"add-remove-container"},r.a.createElement("div",{className:"add-remove-contents"},r.a.createElement("span",{className:"add-remove-title"},"Change Available Amount"),r.a.createElement("div",{className:"add-remove-details"},r.a.createElement("span",{className:"add-remove-availability"},e.available_amount+" "+e.unit_weight+" available"),r.a.createElement(O,{name:e.vegetable_name,handleChange:R,value:A.veg,label:null,placeholder:"0",type:"number",has_max:!1,className:"add-remove-input overview-input"})),r.a.createElement("div",{className:"update-buttons"},r.a.createElement("button",{type:"submit",className:"default-button inventory-add-button",onClick:function(){K(A.requested,isNaN),K(A.update,(function(e){return 0===e.length}));var e=JSON.parse(JSON.stringify(A));e.type="add_inventory",Y(L,H,e,_)},disabled:A.loading},!A.loading&&r.a.createElement("span",null,"Add "+t+" "+e.unit_weight)),r.a.createElement("button",{type:"submit",className:"default-button inventory-remove-button",onClick:function(){K(A.requested,isNaN),K(A.update,(function(e){return 0===e.length}));var e=JSON.parse(JSON.stringify(A));e.requested=Object.keys(e.requested).map((function(t){return[Object(u.a)({},t,-1*e.requested[t])]}))[0][0],e.type="remove_inventory",Y(L,H,e,_)},disabled:A.loading},!A.loading&&r.a.createElement("span",null,"Remove "+t+" "+e.unit_weight))))))}()),"Add New Produce"===A.selectedVegetable&&r.a.createElement("div",{className:"inventory-overview"},U),!("Add New Produce"!==A.selectedVegetable)&&r.a.createElement("div",{className:"form-bottom"},r.a.createElement("button",{type:"submit",className:"default-button order-button",onClick:function(){z(L,H),_(!w)},disabled:A.loading},A.loading&&r.a.createElement(q.RingLoader,{loading:A.loading}),!A.loading&&r.a.createElement("span",null,"Update Inventory")),r.a.createElement("br",null)),!!(X>=200&X<210)&&r.a.createElement("span",null,"Inventory updated."),!!(X>=400)&&r.a.createElement("span",null,"An error has occurred. Please try again later.")))},x=function(e){var t=p().authTokens,a=Object(n.useState)(!1),c=Object(l.a)(a,2),s=c[0],o=c[1];var i=Object(n.useReducer)((function(e,t){return Object(m.a)(Object(m.a)({},e),t)}),{orderSummary:[],orderNumbers:[],query:!1,type:"order"}),d=Object(l.a)(i,2),b=d[0],f=d[1],v=function(e){var t="farm_id"===e.type?h.find((function(t){return t.farm_name===e.name})).id.toString():"market_id"===e.type?k.find((function(t){return t.name===e.name})).id.toString():e.name.replace(/\s+/g,"_").toLowerCase();f({query:Object(m.a)(Object(m.a)({},b.query),{},Object(u.a)({},e.type,t))})},g=Object(n.useState)([]),E=Object(l.a)(g,2),h=E[0],O=E[1],j=Object(n.useState)([]),N=Object(l.a)(j,2),k=N[0],w=N[1];C("orders/","POST",(function(e){f({orderSummary:e})}),t,b.query,JSON.stringify(b.query),s),C("farm/","GET",O,t,null,null,s),C("getMarkets/","GET",w,t,null,null,s);var S=Object.keys(h).map((function(e){return h[e].farm_name})),_=Object.keys(k).map((function(e){return k[e].name})),T=function(e,t){return e.map((function(e){return{name:e,type:t}}))},q=function(){return null},D=r.a.createElement("button",{className:"back-button reset-button",id:"back",onClick:function(){f({query:!1}),o(!s)}},r.a.createElement("span",null));return r.a.createElement("div",{className:"order-summary-form"},r.a.createElement("div",{className:"farm"},e.backButton,r.a.createElement("div",{className:"form-top-container"},r.a.createElement("div",{className:"order-dropdown"},r.a.createElement(y,{dropDownSelect:v,dropDownTitle:"Filter Status",dropDownMap:T(["complete","paid","processing"],"status"),resetRequest:q})),r.a.createElement("div",{className:"order-dropdown"},r.a.createElement(y,{dropDownSelect:v,dropDownTitle:"Filter Farm",dropDownMap:T(S,"farm_id"),resetRequest:q})),r.a.createElement("div",{className:"order-dropdown"},r.a.createElement(y,{dropDownSelect:v,dropDownTitle:"Filter Market",dropDownMap:T(_,"market_id"),resetRequest:q})),r.a.createElement("div",{className:"order-dropdown"},r.a.createElement(y,{dropDownSelect:v,dropDownTitle:"Filter Order Type",dropDownMap:T(["Add Inventory","Remove Inventory","order"],"order_type"),resetRequest:q})),D)),r.a.createElement("div",{className:"order-summary"},b.orderSummary.length>0&&function(){var e=b.orderSummary,t=Object.keys(e).map((function(t){var a=function(e){return Object.keys(e).map((function(t){return r.a.createElement("div",{className:"order-summary-cell"},e[t])}))}(e[t]);return r.a.createElement("div",{className:"order-summary-row"},a)})),a=r.a.createElement("div",{className:"order-summary-row row-header"},Object.keys(e[0]).map((function(e){return r.a.createElement("div",{className:"order-summary-cell cell-header"},e)})));return r.a.createElement("div",{className:"order-summary-container"},a,t)}()))};a(76);var V=function(e){var t=e.className,a=e.valuesObj,n=e.checkedObj,c=e.setSelected,s=e.setList,l=e.requestKey,o=e.selectName,i=t?" "+t:"",u=t?"radio-input"+i+"-radio-input":"radio-input",m=t?"label-checked"+i+"-label-checked":"label-checked",d=t?"label-unchecked"+i+"-label-unchecked":"label-unchecked",p=t?"checkbox-container"+i+"-checkbox-container":"checkbox-container",b=function(e){var t=Object.keys(n);console.log(t),console.log(e.target.name);var r=t.find((function(t){return n[t].id.toString()===e.target.id})),i=n[r].id,u=JSON.parse(JSON.stringify(a)),m=u.findIndex((function(e){return e===i})),d=!n[r].selected;c(r,o,d),-1!==m?u.splice(m,1):u.push(i),s(l,u)};return Object.keys(n).map((function(e){var t=n[e],a=t.selected,c=t.id,s=t.id,l=t.name;return r.a.createElement("div",{className:p},r.a.createElement("label",{className:a?m:d},l,r.a.createElement("input",{className:u,type:"checkbox",name:c,value:a,onChange:b,checked:a,id:s,key:c})))}))},A=function(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)(!1),i=Object(l.a)(o,2),d=i[0],b=i[1],f=Object(n.useState)(!1),v=Object(l.a)(f,2),g=v[0],j=v[1],k=r.a.createElement("button",{className:"back-button",id:"back",onClick:function(){s(!1),b(!1),j(!g),I()}},r.a.createElement("span",null)),w=p().authTokens,S={marketList:[],request:[],Vegetables:[],selectedVegetables:[],selectedDays:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map((function(e){return{name:e,type:"dayOfWeek",id:e.substring(0,3).toUpperCase(),selected:!1}})),loading:!1,success:null,selected:!1};var _=Object(n.useReducer)((function(e,t){return Object(m.a)(Object(m.a)({},e),t)}),S),T=Object(l.a)(_,2),P=T[0],x=T[1],A=function(e){x({request:Object(m.a)(Object(m.a)({},P.request),{},Object(u.a)({},e.target.name,e.target.value))})},F=function(e){x({request:Object(m.a)(Object(m.a)({},P.request),{},Object(u.a)({},e.type,e.id))})},M=function(e){x({Vegetables:e});var t=Object.keys(e).map((function(t){return{id:e[t].id,name:e[t].vegetable_name,selected:!1}}));x({selectedVegetables:t})},R=function(e){x({loading:e})},B=function(e){x({success:e})},I=function(){var e=Object(h.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M(P.Vegetables),B(null),x({request:[]}),x({selected:!1});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();C("user/","GET",(function(e){x({farm:e.farm.id})}),w),C("markets/"+P.farm,"GET",(function(e){var t={address:null,created:null,farm:e.farm,name:"Add New Market"};e.push(t),x({marketList:e})}),w,P.farm,null,g),C("farmVegetable/"+P.farm,"GET",M,w,P.farm);var L=N("markets/"+P.farm,P.request,w),H=function(e,t,a){var n=[];e.forEach((function(e){return n.push(t.find((function(t){return t.id===e})).vegetable_name)}));var r=n.filter((function(e){return e})),c=Object.keys(a).map((function(e){return{name:a[e].name,id:a[e].id,selected:!!r.includes(a[e].name)}}));x({selectedVegetables:c})},J=["name","address"].map((function(e){return r.a.createElement(O,{name:e,handleChange:A,value:P.request[e],placeholder:"Add New Market"!==P.selected?P.selected[e]:"",label:e,type:"text",key:e,className:"market-input"})})),K=Array.from(Array(24).keys()).map((function(e){return e.toString()})),z=["0","15","30","45"],G=K.map((function(e){return{name:e,type:"hour",id:e}})),W=z.map((function(e){return{name:e,type:"minute",id:e}})),U=K.map((function(e){return{name:e,type:"endHour",id:e}})),Y=z.map((function(e){return{name:e,type:"endMinute",id:e}})),X=r.a.createElement("div",{className:"cron-dropdown-container"},r.a.createElement("div",{className:"cron-dropdown-row"},r.a.createElement("div",{className:"cron-label"},"Days Open - "),r.a.createElement("div",{className:"day-of-week-buttons"},r.a.createElement(V,{valuesObj:P.request.dayOfWeek,checkedObj:P.selectedDays,setSelected:function(e,t,a){x({selectedDays:Object(m.a)(Object(m.a)({},P.selectedDays),{},Object(u.a)({},e,Object(m.a)(Object(m.a)({},P.selectedDays[e]),{},Object(u.a)({},t,a))))})},setList:function(e,t){x({request:Object(m.a)(Object(m.a)({},P.request),{},Object(u.a)({},e,t))})},requestKey:"dayOfWeek",selectName:"selected",className:"day-of-week"}))),r.a.createElement("div",{className:"cron-dropdown-row",id:"cron-dropdown"},r.a.createElement("div",{className:"cron-label"},"Start Time - "),r.a.createElement(y,{dropDownSelect:F,dropDownTitle:"Hour",dropDownMap:G,key:"Hour",resetRequest:function(){},selected:P.request.hour,className:"cron-dd"}),r.a.createElement(y,{dropDownSelect:F,dropDownTitle:"Minute",dropDownMap:W,key:"Minute",resetRequest:function(){},selected:P.request.minute,className:"cron-dd"})),r.a.createElement("div",{className:"cron-dropdown-row",id:"cron-dropdown"},r.a.createElement("div",{className:"cron-label"},"End Time - "),r.a.createElement("div",{className:"cron-time-dropdowns"},r.a.createElement(y,{dropDownSelect:F,dropDownTitle:"Hour",dropDownMap:U,key:"endHour",resetRequest:function(){},selected:P.request.endHour,className:"cron-dd"}),r.a.createElement(y,{dropDownSelect:F,dropDownTitle:"Minute",dropDownMap:Y,key:"endMinute",resetRequest:function(){},selected:P.request.endMinute,className:"cron-dd"})))),$=P.success,Q=Object.keys(P.marketList).map((function(e){var t=P.marketList[e].name;return{class:"tile small-tile",name:t,css_id:t.replace(/\s+/g,"-").toLowerCase()}}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cows"}),r.a.createElement("div",{className:"order-form"},r.a.createElement("div",{className:"form-top"},c?k:e.backButton,r.a.createElement("span",{className:"farm-name"},P.selected?P.selected?c:"":"Available Markets")),r.a.createElement("div",{className:"tile-container max-width"},r.a.createElement(D,{tileDetails:Q,backButton:k,selectedComponent:d,setSelectedComponent:b,selectedTile:c,setSelectedTile:s,tileOnClick:function(e){var t="Add New Market"===e.name?e.name:P.marketList.find((function(t){return t.name===e.name}));"Add New Market"!==t&&H(t.farm_vegetable,P.Vegetables,P.selectedVegetables);var a="Add New Market"===e.name?[]:t.farm_vegetable,n=(e.name,[]);x({request:{id:t.id,farm_vegetable:a,dayOfWeek:n}}),x({selected:t})},nameSize:"tile-name-small"})),P.selected&&r.a.createElement("div",{className:"market-container"},r.a.createElement("div",{className:"market-overview"},!(!1===P.selected)&&r.a.createElement("div",{className:"market-rows"},J," ",X)),P.selected?r.a.createElement("div",{className:"check-boxes",id:"market-checkboxes"},r.a.createElement("span",null,"Click items that are available at this market."),r.a.createElement(V,{valuesObj:P.request.farm_vegetable,checkedObj:P.selectedVegetables,setSelected:function(e,t,a){x({selectedVegetables:Object(m.a)(Object(m.a)({},P.selectedVegetables),{},Object(u.a)({},e,Object(m.a)(Object(m.a)({},P.selectedVegetables[e]),{},Object(u.a)({},t,a))))})},setList:function(e,t){x({request:Object(m.a)(Object(m.a)({},P.request),{},Object(u.a)({},e,t))})},requestKey:"farm_vegetable",selectName:"selected"})):r.a.createElement("div",{className:"check-boxes",id:"market-checkboxes"})),r.a.createElement("div",{className:"form-bottom"},P.selected&&r.a.createElement("button",{type:"submit",className:"default-button order-button",onClick:function(){var e,t;e=P.request,t=function(e){return e&&0===e.length},Object.keys(e).map((function(a){return t(e[a])&&delete e[a]})),P.request.name&&s(P.request.name),L(R,B),j(!g)},disabled:P.loading},P.loading&&r.a.createElement(q.RingLoader,{loading:P.loading}),!P.loading&&r.a.createElement("span",null,"Submit Changes")),!!($>=200&$<210)&&r.a.createElement("span",null,"Markets updated."),!!($>=400)&&r.a.createElement("span",null,"An error has occurred. Please try again later."))))},F=a(32),M=a.n(F),R=a(23),B=a.n(R),I=a(19),L=a.n(I),H=function(e){var t=p().authTokens,a=Object(n.useState)(!1),c=Object(l.a)(a,2),s=(c[0],c[1]),o=Object(n.useState)(!1),i=Object(l.a)(o,2),u=(i[0],i[1]),m=N("connectPaypal/",e.paypalCode,t);return r.a.createElement("div",{className:"overlay"},r.a.createElement("div",{className:"popout"},r.a.createElement("button",{type:"submit",className:"default-button order-button finish-paypal-button",onClick:Object(h.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:m(u,s),e.setPaypalCode(!1),e.setHideNav(!1);case 3:case"end":return t.stop()}}),t)})))},r.a.createElement("span",null,"Complete Paypal Connection"))))},J=function(e){var t=null!==e.location.state&&e.location.state.paypalCode,a=localStorage.getItem("is_farmer"),c=Object(n.useState)(t),s=Object(l.a)(c,2),o=s[0],i=s[1],u=Object(n.useState)(!1),m=Object(l.a)(u,2),d=m[0],p=m[1],b=Object(n.useState)(!1),f=Object(l.a)(b,2),v=f[0],g=f[1],E=r.a.createElement("button",{className:"back-button",id:"back",onClick:function(){p(!1),g(!1)}},r.a.createElement("span",null)),h={0:{class:"tile",name:"Inventory",css_id:"inventory",component:r.a.createElement(P,{backButton:E}),content:r.a.createElement("img",{src:L.a,className:"icon"})},1:{class:"tile",name:"Markets",css_id:"markets",component:r.a.createElement(A,{backButton:E}),content:r.a.createElement("img",{src:M.a,className:"icon"})},2:{class:"tile",name:"Order Produce",css_id:"customer-order",component:r.a.createElement(T,{backButton:E,updateCart:e.updateCart}),content:r.a.createElement("img",{src:L.a,className:"icon"})},3:{class:"tile",name:"Order History",css_id:"order-history",component:r.a.createElement(x,{backButton:E}),content:r.a.createElement("img",{src:B.a,className:"icon"})}},y={0:{class:"tile",name:"Order Produce",css_id:"customer-order",component:r.a.createElement(T,{backButton:E,updateCart:e.updateCart}),content:r.a.createElement("img",{src:L.a,className:"icon"})},1:{class:"tile",name:"Order History",css_id:"order-history",component:r.a.createElement(x,{backButton:E}),content:r.a.createElement("img",{src:B.a,className:"icon"})}},O="true"===a?h:y;return r.a.createElement("div",{className:"homepage"},o&&"connected"!==o?r.a.createElement(H,{paypalCode:o,setPaypalCode:i,setHideNav:e.setHideNav}):r.a.createElement(D,{tileDetails:O,backButton:E,selectedComponent:v,setSelectedComponent:g,selectedTile:d,setSelectedTile:p,nameSize:"tile-name-large"}))},K=function(){return r.a.createElement("div",{className:"about-container"},r.a.createElement("div",{className:"about-statement"},"We are BeansTalk! Your digital farmstand. Our mission is to provide a cheap and equitable service to farmers around the country. We believe that supporting local agriculture is important on both an ecological and communal level."))};a(77);var z=function(e){var t=Object(n.useReducer)((function(e,t){return Object(m.a)(Object(m.a)({},e),t)}),[]),a=Object(l.a)(t,2),c=a[0],s=a[1],o=function(e){return s(Object(u.a)({},e.target.name,e.target.value))},i=p().authTokens;C("user/","GET",s,i);var d=["email","username","pass_button"],b=["first_name","last_name","primary_phone","address"],f=Object(n.useState)(d),v=Object(l.a)(f,2),g=v[0],E=v[1],h=Object(n.useState)(!1),y=Object(l.a)(h,2),O=y[0],j=y[1],k=Object(n.useState)(null),w=Object(l.a)(k,2),S=w[0],_=w[1],T=g.map((function(t){return"pass_button"!==t?r.a.createElement("div",{className:"user-settings"},r.a.createElement("label",null,t),r.a.createElement("input",{name:t,type:"text",value:c[t],onChange:o})):r.a.createElement("button",{className:"forgot-password-link user-settings",onClick:function(){return e.history.push("/forgotPassword")}},r.a.createElement("span",null,"Reset Password"))})),q=N("user/",c,i);return r.a.createElement("div",{className:"settings-page"},r.a.createElement("div",{className:"settings-box"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4"},r.a.createElement("div",{className:"settings-section"},r.a.createElement("h3",null,"Your Details"),r.a.createElement("div",null,r.a.createElement("button",{className:g[0]===d[0]?"settings-section-selected":"settings-section-button",onClick:function(){return E(d)}},"Account"),r.a.createElement("button",{className:g[0]===b[0]?"settings-section-selected":"settings-section-button",onClick:function(){return E(b)}},"Basic Info"))),r.a.createElement("div",{className:"settings-info"},T)))),r.a.createElement("button",{type:"submit",className:"default-button",onClick:function(){return q(j,_)},disabled:O},!O&&r.a.createElement("span",null,"Save Settings")),!!(S>=200&S<210)&&r.a.createElement("span",null,"Settings Successfully Changed"),!!(S>=400)&&r.a.createElement("span",null,"An error has occurred. Please try again later."))},G=(a(27),a(78),a(16)),W=a.n(G);var U=function(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),c=a[0],s=a[1],o=p().setAuthTokens,d=Object(n.useReducer)((function(e,t){return Object(m.a)(Object(m.a)({},e),t)}),{username:"",password:""}),b=Object(l.a)(d,2),f=b[0],v=b[1],g=Object(n.useState)(!1),y=Object(l.a)(g,2),j=y[0],N=y[1],k=window.location.href.match(/code=.*/),w=!!k&&k[0].replace(/&scope=.*/,"").replace(/code=/,""),C=function(e){return v(Object(u.a)({},e.target.name,e.target.value))},S=Object(n.useCallback)(Object(h.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("http://rootsuat-env.eba-g7nmg6yf.us-east-2.elasticbeanstalk.com/api-token-auth/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}).then((function(e){return e.json()})).then((function(e){var t,a;t=Object.keys(e),a=["token","is_farmer","is_customer"],JSON.stringify(t)===JSON.stringify(a)?(o(e.token),localStorage.setItem("token",e.token),localStorage.setItem("is_farmer",e.is_farmer),localStorage.setItem("is_customer",e.is_customer),s(!0)):(console.log(Object.keys(e)),N(e))}));case 1:case"end":return e.stop()}}),e)}))),[f,o]);return c?r.a.createElement(i.a,{to:{pathname:"/app/home",state:{paypalCode:w}}}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"login-container"},r.a.createElement("img",{src:W.a,className:"logo"}),r.a.createElement("div",{className:"login-inputs"},r.a.createElement(O,{name:"username",type:"text",value:f.username,handleChange:C,placeholder:"Username",className:"login-input",labelClass:"no-label",onEnter:!0}),r.a.createElement(O,{name:"password",type:"password",value:f.password,handleChange:C,placeholder:"Password",className:"login-input",labelClass:"no-label",onEnter:!0})),r.a.createElement("div",{className:"login-button-container"},r.a.createElement("button",{type:"submit",className:"default-button login-button",id:"enter-button",onClick:function(){S(f),w&&e.setHideNav(!0)},onKeyPress:function(e){"Enter"===e.key&&(document.getElementById("login-button").click(),console.log("enter"))}},r.a.createElement("span",null,"Login")),r.a.createElement("button",{className:"default-button login-button",id:"login-button",onClick:function(){return e.history.push("/signup")}},r.a.createElement("span",null,"Sign Up")),r.a.createElement("button",{className:"forgot-password-link",onClick:function(){return e.history.push("/forgotPassword")}},r.a.createElement("span",null,"Forgot Password")))),r.a.createElement("span",{className:"connect-message"},w&&"Please login to complete the paypal connection."),!(!1===j)&&r.a.createElement("span",{className:"error-message"},r.a.createElement("div",null,"An error has occurred. See below for details or try again later.")),!(!1===j)&&r.a.createElement("span",{className:"error-message"},Object.keys(j).map((function(e){return r.a.createElement("div",null,e+" "+j[e])}))))},Y=function(e){return r.a.createElement(r.a.Fragment,null,!e.shouldPaymentFormDisplay&&r.a.createElement("button",{type:"submit",className:"default-button",onClick:function(){e.orderFunc(e.setLoading,e.setSuccess,e.setOrderId),e.setShouldPaymentFormDisplay(!e.shouldPaymentFormDisplay),e.setStartTimer(!0)}},r.a.createElement("span",null,e.buttonName)))};var X=function(e){var t=Object(n.useState)(null),a=Object(l.a)(t,2),c=a[0],s=a[1],o=Object(n.useRef)(),i=p().authTokens,u=Object(n.useState)(!1),m=Object(l.a)(u,2),d=(m[0],m[1]),b=Object(n.useState)(!1),f=Object(l.a)(b,2),v=(f[0],f[1]),g=k("makePayment/",i),y=Object(n.useState)(!1),O=Object(l.a)(y,2),j=O[0],N=O[1],w=Object(n.useState)(!1),C=Object(l.a)(w,2),S=(C[0],C[1]);Object(n.useEffect)((function(){if(!j){var t=document.createElement("script");t.src="https://www.paypal.com/sdk/js?client-id=AVqJ_v8BdeUPsTdm_XdCT68OlLHuxOt3Zaq_86ascEK_rac3XuyUKEX1GzQVqij-An6PQNoY5p1uVWv1&merchant-id="+e.merchantId,t.type="text/javascript",t.setAttribute("data-namespace","paypal_sdk"),t.onload=Object(h.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S(!0),_();case 2:case"end":return e.stop()}}),e)}))),document.getElementsByTagName("body")[0].appendChild(t),N(!0)}}),[]);var _=function(){return window.paypal_sdk.Buttons({createOrder:function(t,a){return a.order.create({purchase_units:[{description:e.orderDetails.description,amount:{currency_code:"USD",value:e.orderDetails.price}}]})},onApprove:function(){var t=Object(h.a)(E.a.mark((function t(a,n){var r,c;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.order.capture();case 2:r=t.sent,c={amount:r.purchase_units[0].amount.value,paypal_merchant_id:r.purchase_units[0].payee.merchant_id,paypal_order_id:r.id,paypal_payer_id:r.payer.payer_id,paypal_payment_id:a.paymentID,payment_service:"paypal",order:e.orderId,status:"completed",farm:e.farm.id},g(d,v,c),e.deleteCart(e.cartKey),e.setSelectedCart(!1),e.setStartTimer(!1),e.setCartSuccess(200);case 9:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),onError:function(e){s(e)}}).render(o.current)};return r.a.createElement("div",{className:"paypal-buttons-container"},c&&r.a.createElement("div",null,"Uh oh, an error occurred! ",c.message),r.a.createElement("div",{ref:o}))},$=function(e){var t=Object(n.useState)(10),a=Object(l.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)(0),i=Object(l.a)(o,2),u=i[0],m=i[1],d=Object(n.useState)(e.startTimer),p=Object(l.a)(d,2),b=p[0],f=p[1];return Object(n.useEffect)((function(){b&&(u>0&&setTimeout((function(){return m(u-1)}),1e3),0===u&&0===c&&f(!1)&&e.deleteCart(e.cartKey),0===u&&setTimeout((function(){s(c-1),m(59)}),1e3))}),[u]),r.a.createElement("div",null,b?r.a.createElement("h1",null,"Checkout Timer: ",c,":",u<10?"0".concat(u):u):r.a.createElement("h1",null,"Your checkout time has expired. Please refill your cart and try again. Thank you!"))},Q=function(e){var t=p().authTokens;var a=e.selectedCart,c=e.setSelectedCart,s=Object(n.useState)(!1),o=Object(l.a)(s,2),i=o[0],u=o[1],d=Object(n.useReducer)((function(e,t){return Object(m.a)(Object(m.a)({},e),t)}),{type:"order",loading:!1,success:null,update:"update"}),b=Object(l.a)(d,2),f=b[0],v=b[1],g=f.success,E=JSON.parse(JSON.stringify(e.cart[a]));E.market=parseInt(a.split("/")[1]);var h=N("formDetailsPost/",[f.type,E],t),y=e.cart[a].farm,O=e.cart[a].market,j={price:e.cart[a].price},k=Object(n.useState)(!1),w=Object(l.a)(k,2),S=w[0],_=w[1],T=JSON.stringify({farm:y.id});console.log(T),C("getMerchantId/","POST",_,t,a,T);var q,D=r.a.createElement(X,{orderDetails:j,farm:y,merchantId:S,orderId:i,cartKey:a,deleteCart:e.deleteCart,setSelectedCart:e.setSelectedCart,setStartTimer:e.setStartTimer,setCartSuccess:e.setCartSuccess}),P=r.a.createElement("div",{className:"cart-row"},r.a.createElement("span",{className:"farm-market-name"},y.name+" at "+O),(q=a,Object.keys(e.cart[q].requested).map((function(t){var n=e.cart[q].requested[t],s=e.cart[q].vegetables.find((function(e){return t===e.vegetable_name})),l=s.price*n;return r.a.createElement("div",{className:"cart-row-contents"},r.a.createElement("div",{className:"cart-vegetable-row"},r.a.createElement("div",{className:"cart-row-column"},r.a.createElement("span",{className:"vegetable-name"},t),r.a.createElement("span",{className:"cart-details"},n+" "+s.unit_weight),r.a.createElement("span",{className:"cart-details"},"$"+l))),r.a.createElement("button",{className:"remove-button",onClick:function(){e.removeFromCart(q,t),v({update:"update"}),void 0===e.cart[a]&&c(Object.keys(e.cart)[0])}},r.a.createElement("span",null,"x")))}))),r.a.createElement("h1",null,"Total Price: $",j.price),r.a.createElement(Y,{buttonName:"Checkout with Paypal",orderFunc:h,setLoading:function(e){v({loading:e})},setSuccess:function(e){v({success:e})},setOrderId:u,setStartTimer:e.setStartTimer,orderId:i,setShouldPaymentFormDisplay:e.setShouldPaymentFormDisplay,shouldPaymentFormDisplay:e.shouldPaymentFormDisplay}));return r.a.createElement("div",{className:"cart-row-container"},P,e.startTimer&&r.a.createElement($,{startTimer:e.startTimer,deleteCart:e.deleteCart,cartKey:e.cartKey}),e.shouldPaymentFormDisplay&&i&&D,!!(g>=400)&&r.a.createElement("span",null,"An error has occurred. Please try again later."))},Z=function(e){p().authTokens;var t=e.selectedCart,a=e.setSelectedCart,c=Object(n.useState)(!1),s=Object(l.a)(c,2),o=s[0],i=s[1],u=Object(n.useState)(!1),m=Object(l.a)(u,2),d=m[0],b=m[1],f=Object(n.useState)(!1),v=Object(l.a)(f,2),g=v[0],E=v[1],h=Object.keys(e.cart).map((function(n){var c=n===t?"cart-bar-button-selected":"cart-bar-button";return r.a.createElement("div",null,r.a.createElement("button",{className:c,onClick:function(){a(n),i(!1),b(!1),E(!1)}},r.a.createElement("span",null,e.cart[n].farm.name+" at "+e.cart[n].market)))}));return r.a.createElement("div",{className:"cart-container"},r.a.createElement("div",{className:"selected-tile",id:"selected-tile"},r.a.createElement("span",{className:"tile-name-large"},"Cart"),r.a.createElement("div",{className:"cart-bar"},h),""===e.cart&&!g&&r.a.createElement("span",null,"Your Cart is Empty"),!!(g>=200&g<210)&&r.a.createElement("span",null,"Order placed. You should be receiving a confirmation email shortly."),!!(g>=400)&&r.a.createElement("span",null,"An error has occurred. Please try again later."),t&&r.a.createElement(Q,{selectedCart:t,cart:e.cart,removeFromCart:e.removeFromCart,deleteCart:e.deleteCart,setSelectedCart:a,shouldPaymentFormDisplay:o,setShouldPaymentFormDisplay:i,startTimer:d,setStartTimer:b,setCartSuccess:E})))},ee=function(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)(!1),d=Object(l.a)(o,2),p=d[0],b=d[1],f=function(e,t,a,n,r){s(Object(m.a)(Object(m.a)({},c),{},Object(u.a)({},e.farm_plus_market,{requested:e.requested,vegetables:t,farm:a,market:n,status:"processing",price:r})))},g=function(e,t){delete c[e].requested[t],0===Object.keys(c[e].requested).length&&b(!1),0===Object.keys(c[e].requested).length&&delete c[e],0===Object.keys(c).length&&b(!1),0===Object.keys(c).length&&s("")},E=function(e){b(!1),delete c[e],0===Object.keys(c).length&&s("")},h=Object.keys(c),y=""!==c&&h.map((function(e){return Object.keys(c[e].requested).length})).reduce((function(e,t){return e+t})),O=e.setHideNav;return r.a.createElement("div",{className:"primary-layout"},r.a.createElement(v,{nVegetables:y,hideNav:e.hideNav}),r.a.createElement("main",null,r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"".concat(e.match.path,"/home"),render:function(e){return r.a.createElement(J,Object.assign({},e,{updateCart:f,setHideNav:O}))}}),r.a.createElement(i.b,{path:"".concat(e.match.path,"/about"),component:K}),r.a.createElement(i.b,{path:"".concat(e.match.path,"/settings"),component:z}),r.a.createElement(i.b,{path:"".concat(e.match.path,"/cart"),render:function(e){return r.a.createElement(Z,Object.assign({},e,{cart:c,removeFromCart:g,deleteCart:E,selectedCart:p,setSelectedCart:b}))}}),r.a.createElement(i.b,{path:"".concat(e.match.path,"/login"),render:function(e){return r.a.createElement(U,Object.assign({},e,{setHideNav:e.setHideNav}))}}),r.a.createElement(i.a,{to:"".concat(e.match.url)}))))},te=a(33);var ae=function(e){var t=e.component,a=Object(te.a)(e,["component"]),n=p().authTokens;return r.a.createElement(i.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,Object.assign({},e,a)):r.a.createElement(i.a,{to:"/login"})}}))},ne=function(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)(!1),i=Object(l.a)(o,2),u=i[0],m=i[1];Object(n.useEffect)((function(){if(!c){var e=document.createElement("script");e.id="ppIdentity",e.src="https://www.paypalobjects.com/js/external/connect/api.js",e.type="text/javascript",e.onload=function(){m(!0),s(!0)},document.getElementsByTagName("body")[0].appendChild(e)}}),[]);u&!c&&window.paypal.use(["login"],(function(e){e.render({appid:"AVqJ_v8BdeUPsTdm_XdCT68OlLHuxOt3Zaq_86ascEK_rac3XuyUKEX1GzQVqij-An6PQNoY5p1uVWv1",authend:"sandbox",scopes:["openid"],containerid:"cwppButton",responseType:"code",locale:"en-us",buttonType:"CWP",buttonShape:"pill",buttonSize:"lg",fullPage:"true",returnurl:"http://beanstalkuat-env.eba-zdf8nmdf.us-east-2.elasticbeanstalk.com/login"})}));return r.a.createElement("span",{id:"cwppButton"})};var re=function(e){p().authTokens;var t=Object(n.useReducer)((function(e,t){return Object(m.a)(Object(m.a)({},e),t)}),{is_farmer:!1,is_customer:!1,farm:"",secondary_phone:"None",is_staff:!1,is_superuser:!1,created_by:"client",updated_by:"client"}),a=Object(l.a)(t,2),c=a[0],s=a[1],o=function(e){return s(Object(u.a)({},e.target.name,e.target.value))},i=Object(n.useState)(["email","username","password","first_name","last_name","primary_phone","address"]),d=Object(l.a)(i,2),b=d[0],f=(d[1],Object(n.useState)(!1)),v=Object(l.a)(f,2),g=v[0],y=v[1],j=Object(n.useState)(!1),N=Object(l.a)(j,2),k=N[0],w=N[1],C=Object(n.useState)(!1),S=Object(l.a)(C,2),_=S[0],T=S[1],D=function(e){var t=e.status,a=e.json();return Promise.all([t,a]).then((function(e){return{statusCode:e[0],data:e[1]}}))},P=Object(n.useCallback)(Object(h.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T(!0),fetch("http://rootsuat-env.eba-g7nmg6yf.us-east-2.elasticbeanstalk.com/userCreate/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then(D).then((function(e){var t=e.statusCode,a=e.data;w(t),y(a)})),T(!1);case 3:case"end":return e.stop()}}),e)}))),[c]),x=r.a.createElement("div",{className:"paypal-signup"},r.a.createElement("span",{className:"signup-question"},"If you would like to receive payments, please connect your paypal account."),r.a.createElement(ne,null));return r.a.createElement("div",{className:"signup-container"},r.a.createElement("img",{src:W.a,className:"logo"}),!(c.is_farmer|c.is_customer)&&!(c.is_farmer&&k&&k<210)&&r.a.createElement("div",{className:"login-inputs"},r.a.createElement("span",{className:"signup-question"},"Who are you?"),r.a.createElement("div",{className:"signup-button-container"},r.a.createElement("button",{type:"submit",className:"default-button signup-button",onClick:function(){return s({is_farmer:!0},b.push("farm"))}},r.a.createElement("span",null,"Farmer")),r.a.createElement("button",{type:"submit",className:"default-button signup-button",onClick:function(){return s({is_customer:!0})}},r.a.createElement("span",null,"Customer")))),!!(c.is_farmer|c.is_customer)&&!(c.is_farmer&&k&&k<210)&&r.a.createElement("div",{className:"signup"},r.a.createElement("div",{className:"signup-inputs"},function(e){return e.map((function(e){return r.a.createElement(O,{name:e,type:"password"===e?e:"text",value:c.key,handleChange:o,placeholder:e,className:"login-input"})}))}(b)),r.a.createElement("div",{className:"signup-button-container"},r.a.createElement("button",{type:"submit",className:"default-button",onClick:function(){return P(c)}},r.a.createElement("span",null,"Create Account")),r.a.createElement("button",{type:"submit",className:"default-button",onClick:function(){return e.history.push("/login")}},r.a.createElement("span",null,"Back to Login")))),!(201!==k)&&r.a.createElement("span",null,"Account created, please verify your email before logging in."),!(201===k||!1===g)&&r.a.createElement("span",null,"An error has occurred."),!(!1===g||201===k)&&r.a.createElement("span",null,Object.keys(g).map((function(e){return r.a.createElement("div",null,e+": "+g[e])}))),_&&r.a.createElement(q.RingLoader,{loading:_}),c.is_farmer&&k&&k<210&&x)},ce=function(e){var t=window.location.href.match("(?<=token=)(.*)"),a=t?t[0]:null,c=Object(n.useReducer)((function(e,t){return Object(m.a)(Object(m.a)({},e),t)}),{password:"",confirmPassword:""}),s=Object(l.a)(c,2),o=s[0],i=s[1],d=Object(n.useState)(!1),p=Object(l.a)(d,2),b=(p[0],p[1]),f=Object(n.useState)(!1),v=Object(l.a)(f,2),g=v[0],E=v[1],h=function(e){return i(Object(u.a)({},e.target.name,e.target.value))},y=w("passwordReset/confirm/");return r.a.createElement("div",{className:"password-reset-container"},r.a.createElement("img",{src:W.a,className:"logo"}),r.a.createElement("div",{className:"password-reset-input-container"},r.a.createElement(O,{name:"password",type:"password",value:o.password,handleChange:h,className:"login-input",placeholder:"New Password",onEnter:!0}),r.a.createElement(O,{name:"confirmPassword",type:"password",value:o.confirmPassword,handleChange:h,className:"login-input",placeholder:"Confirm Password",onEnter:!0})),r.a.createElement("div",{className:"password-reset-button-container"},r.a.createElement("button",{type:"submit",className:"default-button login-button",id:"enter-button",onClick:function(){y(b,E,function(){if(o.password===o.confirmPassword&&a)return{token:a,password:o.password}}())}},r.a.createElement("span",null,"Reset Password")),r.a.createElement("button",{type:"submit",className:"default-button login-button",onClick:function(){return e.history.push("/login")}},r.a.createElement("span",null,"Back to Login"))),r.a.createElement("br",null),!(!1===g)&&"OK"!==g&&r.a.createElement("span",{className:"error-message"},r.a.createElement("div",null,"An error has occurred. See below for details or try again later.")),!(!1===g)&&"OK"!==g&&r.a.createElement("span",{className:"error-message"},r.a.createElement("div",null,g)),!("OK"!==g)&&r.a.createElement("span",{className:"error-message"},r.a.createElement("div",null,"Password successfully changed.")))},se=function(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)(!1),i=Object(l.a)(o,2),u=(i[0],i[1]),m=Object(n.useState)(!1),d=Object(l.a)(m,2),p=d[0],b=d[1],f=w("passwordReset/");return r.a.createElement("div",{className:"password-reset-container"},r.a.createElement("img",{src:W.a,className:"logo"}),r.a.createElement(O,{name:"email",type:"input",value:c,handleChange:function(e){return s(e.target.value)},className:"login-input",placeholder:"Enter your email",onEnter:!0}),r.a.createElement("div",{className:"password-reset-button-container"},r.a.createElement("button",{type:"submit",className:"default-button login-button",id:"enter-button",onClick:function(){f(u,b,{email:c})}},r.a.createElement("span",null,"Submit")),r.a.createElement("button",{type:"submit",className:"default-button login-button",onClick:function(){return e.history.push("/login")}},r.a.createElement("span",null,"Back to Login"))),r.a.createElement("br",null),!(!1===p)&&"OK"!==p&&r.a.createElement("span",{className:"error-message"},r.a.createElement("div",null,"An error has occurred. See below for details or try again later.")),!(!1===p)&&"OK"!==p&&r.a.createElement("span",{className:"error-message"},r.a.createElement("div",null,p)),!("OK"!==p)&&r.a.createElement("span",{className:"error-message"},r.a.createElement("div",null,"A password reset link has been sent to your email.")))};var le=function(){var e=Object(n.useState)(),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(!1),u=Object(l.a)(s,2),m=u[0],p=u[1];return r.a.createElement("div",{className:"App"},r.a.createElement(d.Provider,{value:{authTokens:a,setAuthTokens:function(e){c(e)}}},r.a.createElement(o.a,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/login",render:function(e){return r.a.createElement(U,Object.assign({},e,{setHideNav:p,hideNav:m}))}}),r.a.createElement(i.b,{path:"/signup",component:re}),r.a.createElement(i.b,{path:"/passwordReset",component:ce}),r.a.createElement(i.b,{path:"/forgotPassword",component:se}),r.a.createElement(ae,{path:"/app",component:ee,setHideNav:p,hideNav:m})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[34,1,2]]]);
//# sourceMappingURL=main.25557cf4.chunk.js.map